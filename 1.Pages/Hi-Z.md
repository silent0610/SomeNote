---
Type:
  - Page
aliases:
  - HZB
  - Hi-Z buffer
  - Hierarchical Z-Buffer
  - 层次Z缓冲
tags: 
Status: 
modifiedDate: 星期四, 五月 29日 2025, 1:58:45 下午
---

## 定义

- 一种 Z-buffer 技术
- 层级的 Z-Buffer, 和 [[MipMap]] 和 [Cascade Shadow Map](Cascade%20Shadow%20Map.md) 等金字塔十分相似

### 核心思想

- 上层的 Z 是下层区域 Z 的最大值 **(即最远可见点)**, 如果一个某个物体的深度比上层最大值还大 **(即比当前区域最远可见点还远)**, 则说明一定会被遮挡 **(其它位置都比它近)**, 无需计算, 否则计算下一层

## 细节

### 实现

Mip Level 1 的一个像素存储的是 Mip Level 0 中 2x2 区域的**最大深度值**（最远）。Mip Level 2 的一个像素存储的是 Mip Level 1 中 2x2 区域的**最大深度值**，以此类推，直到金字塔顶层（最低分辨率）。

### 应用

GPU 会从 Hi-Z 金字塔的**低分辨率层级**开始查询（例如，如果物体在屏幕上占据的像素面积很小，就可以从更低分辨率的 Mip Level 开始）。

## 原因

- 极大地加速遮挡剔除: 允许粗粒度的深度测试,如果一个大的区域都被遮挡了，就无需查询该区域内所有更精细的像素。
- **减轻 CPU 负载：** 将大量的深度测试和剔除计算从 CPU 转移到 GPU，充分利用 GPU 的并行计算能力。

---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/19, 10:34:11
---

# 模板测试

模板缓冲（Stencil Buffer）是图形管线中一种 **逐像素的屏幕缓冲区**，它的主要作用是：
- 控制哪些像素“允许被绘制”，哪些不允许 —— 通过对模板值进行测试决定是否通过。

## 应用

模板测试的功能很强大，可以用于生成很多特殊效果，例如：
1. 在处理次表面散射现象的时候，可以使用模板测试，只在需要进行次表面散射的地方应用这个开销很大的算法。
2. 可以使用模板测试来进行更加精确的入口剔除（portal culling）。
3. 利用模板缓冲来实现三角形划分。
    1. 图形遮罩控制的“区域划分”
    2. 你希望将一个大三角形区域，**逻辑上划分为多个子区域**（比如切成 3 块），但不直接改变几何结构，而是利用**模板缓冲来控制哪些区域被绘制**
    3. 使用模板缓冲写入不同值（比如 1、2、3）来标识不同子区域；
    4. 后续绘制时通过 `glStencilFunc` 控制只绘制模板值为某个值的区域，实现“逻辑划分”；
    5. 这样实现一种不修改顶点结构的划分、遮罩、渲染控制。

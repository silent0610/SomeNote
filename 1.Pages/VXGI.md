---
Type: 
aliases:
  - Voxel Global Illumination
tags: 
modifiedDate: 2025/06/24, 11:18:43
---

# VXGI

## 思想

- 离相机比较近的区域的GI更为重要
- 所以离相机近的地方，用更密的 Voxel 去表达；
    （比如1m*1m），远处的精度逐级变小（2m*2m，4m*4m，8m*8m等）。

## 实现细节

### 相机移动时更新

- 空间中每个点在 VXGI 中的 Texture uv 是固定的
- 如 uv = worldPos/clipmapSize
- 从而减少相机移动时, 一些重复位置的开销
    - 不计算移动后仍在内部的
    - 只计算移动前后改变的部分
![[assets/20250605-1.png]]

### 体素透明度

计算每个体素的透明度
通过体素内三角形的投影面积计算?

### 使用 RSM 初始化表面体素光照

- 注入光照

### Shading with Cone Tracing

- 沿着 Voxel 积累透明度和颜色
- 直到满足透明度阈值
- 在计算动态漫反射的时候，可以追踪若干个圆锥，在计算镜面反射的时候，可以只追踪一个圆锥。

## 得失

优点：
- 质量很高。可以同时实现漫反射和镜面反射。
- 实现相对 [[SVOGI]] 简单
    - 如果采用稀疏体素八叉树（sparse voxel octree）的形式，需要查找圆锥与八叉树的交点，涉及大量内存查找。更新体素结构效率很低。因此通常采取clipmap的方式体素化。
缺点
- 不正确的遮挡
    - alpha 的累积本质是不正确的
- 漏光
    - 当墙远小于体素大小时

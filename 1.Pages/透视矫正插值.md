---
Type: 
aliases:
  - Perspective-Correct Interpolation
  - 透视正确插值
tags: 
modifiedDate: 2025/06/19, 15:35:46
---

# 透视矫正插值

## 问题描述

- 透视投影会导致深度值在 NDC 空间中**不是均匀分布的**, 也就是非线性的, 通常集中于远平面
- 直接使用非线性的深度进行插值是不正确
- 为了在屏幕空间正确插值三维属性（如颜色、法线、纹理坐标），我们不能直接在屏幕空间对它们进行线性插值。我们需要进行**透视校正**。

## 方法

[重心坐标插值](重心坐标插值.md)

> 透视投影使得屏幕上的东西不是关于 z 线性变化的，而是关于 **1/z** 线性变化，所以我们插值时要使用 **1/z** 来“矫正透视”。

$$
f_{P}=\frac{\alpha\frac{{f}_{A}}{w_{A}}+\beta\frac{{f}_{B}}{w_{B}}+\gamma\frac{{f}_{C}}{w_{C}}}{\alpha\frac{1}{w_{A}}+\beta\frac{1}{w_{B}}+\gamma\frac{1}{w_{C}}}
$$

α,β,γ 是像素 P 在**屏幕空间**的重心坐标。
fA​,fB​,fC​ 是三角形三个顶点 VA​,VB​,VC​ 上待插值的属性值（例如颜色、法线、纹理坐标）。
wA​,wB​,wC​ 是三角形三个顶点在**透视投影之前的齐次坐标的第四个分量**。在视图空间中，这个 w 分量通常对应于该顶点的**负视图空间 Z 坐标**（即 −Zview​）。
- 右手系中是-Z #渲染器实现细节 

---
Type: 
aliases:
  - std::thread
tags: 
modifiedDate: 2025/06/12, 20:34:14
---

# C++线程

## 定义

C++11 提供了 **`std::thread`** 类，用于创建和管理线程。这是C++标准库中进行多线程编程的入口。

## 作用

创建一个 `std::thread` 对象并给它传递一个**可调用对象**（如函数、lambda表达式、函数对象），新线程就会开始执行这个可调用对象。

### 方法

#### Join ()

- 调用 `join()` 的线程[^1]会**阻塞**，直到被调用的线程（`t`）执行完成为止。
- 这是获取线程执行结果、确保线程在主线程结束前完成所有工作的常用方法。
- 一个线程只能被 `join()` 一次。

#### detach()

- 调用 `detach()` 后，线程会与 `std::thread` 对象分离，成为一个**守护线程（daemon thread）**，在后台独立运行。
- `std::thread` 对象销毁后，该后台线程依然可以继续运行。主线程也无需等待它结束。
- **警告**：分离的线程需要自己管理其生命周期。如果主程序退出，分离的线程会被强制终止。你也无法再与它进行任何交互。

> [!note] std::jthread
>之前的std::thread在析构时如果没有join或者detach会crash，而jthread在析构时会自动join。jthread也可以取消线程：request_stop()。

## 应用与扩展

可以用于写一个 [[C++线程池]]

[^1]: 通常是主线程

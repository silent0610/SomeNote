---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/27, 14:27:04
---

# 法线变换

- 详细见 [Site Unreachable](https://zhuanlan.zhihu.com/p/449976247)
- 结论
    - ***变换矩阵只包含平移、旋转和等比缩放时, 法线变化矩阵等于变换矩阵*** $M$
    - 包含非等比缩放时, 使用变换矩阵的**伴随转置矩阵** $N=(M^{*})^T$, 且**最后需要归一化**

## 首先是为什么不能直接用 Model 矩阵

因为法线的本质是**垂直于表面**。当您对一个物体进行非均匀缩放（例如，只在X轴上把它压扁）时，表面的角度会发生变化。如果此时仍然用原始的模型矩阵去乘以法线，变换后的法线将不再垂直于变换后的表面。

## 那怎么做?

- 最正确的做法是 model 矩阵的**逆转置矩阵**(根据数学推导)

即

$$
\begin{align} &N=(M^{-1})^T  \end{align}
$$

- **但矩阵存在不可逆的情况**
- 可以利用伴随矩阵, 因为有

$$
A^*=|A|A^{-1}
$$

可以用 $M^*$ 替换上面的 $M^{-1}$ ，反正法向量变换后基本上都要**再 normalized 一下**。于是最终式子写成：

$$
N=(M^{*})^T 
$$

- 但是求转置矩阵也是十分复杂的

> 只包含平移、旋转和**等比缩放**的变换矩阵是**正交矩阵**(一定可逆)

而正交矩阵有

$$
M^{-1} = M^{T}
$$

所以就有

$$
N=(M^{-1})^T=M^{TT} = M
$$

即
***变换矩阵只包含平移、旋转和等比缩放时, 法线变化矩阵等于变换矩阵***

---
Type:
  - Page
Status: 
tags:
---
- 阴影贴图
    - 两Pass算法
    - 纯图像空间
    - 阴影贴图的问题
        - 自阴影
            - 由于数值精度问题
    - Second-depth shadow mapping
        - 原理
            - 记录最小和次小的深度（离光源越近越小），使用其均值
        - 问题
            - 要求所有物体是有两面（watertight，水密的）的，比如地板和纸就不行
            - 怎么实践保留最小和次小的深度，这会带来时间开销
                - 实时渲染不相信复杂度 #名言
	- 在实时渲染中，我们关注近似相等 #名言
	- 阴影贴图什么时候较准确？两者有一个成立即可
		- 积分域小，比如点，方向光
			- 全局光照的积分域很广
		- 平滑积分 ，例如diffuse
			- 例如glossy材质就不支持
- 软阴影
    - PCF 百分比接近过滤
        - 对比阴影贴图中对应像素周围一圈的深度
    - PCSS，百分比接近软阴影。 相比于PCF额外计算filtersize
        1. Blocker Search 计算范围内的的平均blocker（能够遮挡的）深度
        2. 使用平均Blocker 深度去计算PCF的filter size
        3. PCF

---

- VSSM 方差软阴影映射。解决第三步
    - Summed Area Tables（SAT）
    - $D(X)=E(X^2)-E^2(X)$
    - CDF 累积分布函数
        - 切比雪夫不等式
- 解决第一步
    - 还得是切比雪夫
    - 确实过于大胆了
- 求给定区域内均值
    - MIPMAP mipmap
        - 允许快速的近似的方形的范围的查询，查询不准
    - SAT
- Moment shadow mapping
    - VSSM 漏光
        - 漏光，也即亮度大，即P（x>t）越大，即$a^2/(a^2+(t-u)^2)$越大，即方差大。 即附近的物体深度方差大
            - 分布不准确，即不是正态分布
            - 接收物不是平面时存在问题
            - 切比雪夫估计不准确（只能估计大于平均值的情况）
    - 使用 higher order moments （矩）来更准确的描述分布。意思类似于泰勒展开

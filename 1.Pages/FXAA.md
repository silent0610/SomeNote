---
Type: 
aliases:
  - 快速近似抗锯齿
  - fast approximate antialiasing
tags: 
modifiedDate: 星期三, 六月 4日 2025, 4:57:54 下午
---
基于形态学的抗锯齿方法, 只使用了颜色缓冲

## 原理

> 在最终渲染的图像上，快速检测出锯齿状的边缘，并沿着这些边缘的方向进行选择性模糊，从而平滑锯齿。

- 边缘判断
    - 亮度计算, 将 RGB 颜色转换为感知亮度.[^1] 
- **局部对比度分析**：
    - **寻找最大/最小亮度**：在中心像素及其周围（通常是 8 个）邻居像素中，找到最大亮度和最小亮度。
    - **计算亮度范围**：计算这个最大亮度与最小亮度的差值，得到一个**局部亮度范围**。
    - **阈值判断**：如果这个局部亮度范围超过一个预设的**阈值 (Threshold)**，则认为当前像素位于一个边缘上。
- 边缘方向估算
    - 一旦确定是边缘像素，FXAA 会进一步分析邻居像素的亮度，以确定这个边缘的**主导方向**（是水平、垂直、还是对角线）。这通常**通过计算亮度梯度**来实现。
- 沿着这个估算出的边缘方向，以**计算出的步长**对图像进行**多次采样和加权混合**。
- 通过一个**最终的亮度检查**来决定使用更强（`rgbB`）还是更弱（`rgbA`）的模糊结果，以避免过度模糊或细节损失。

## 优缺点

- 极高的速度和效率
- 后处理, 只使用颜色缓冲, 易于集成
- 带宽和内存占用低

缺点:
- 看起来略模糊, 由于本质上是模糊边缘,导致“丢失锐度”的感觉。
- 时间不稳定, 根据当前的边缘数量
- **不处理子像素细节**：因为它是在像素级别操作，无法恢复低于一个像素的细节。

[^1]: `L = 0.299*R + 0.587*G + 0.114*B`

---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/17, 20:27:23
---

# C++allocator

## 定义

**C++ Allocator (分配器)** 是一个符合特定接口的 C++ 类对象，它封装了内存管理的策略。它的核心职责是为 C++ 标准库中的容器（如 `std::vector`, `std::list`, `std::map` 等）提供获取和释放内存的能力。通过这种方式，它将容器的数据结构逻辑与底层的内存管理细节解耦。

## 原因

new在内存分配上面有一些局限性，new的机制是将内存分配和对象构造组合在一起，同样的，delete也是将对象析构和内存释放组合在一起的。
allocator将这两部分分开进行，allocator申请一部分内存，不进行初始化对象，只有当需要的时候才进行初始化操作。

具体的包括:
1. 自定义内存管理: 控制内存的分配和释放, 更高效的利用内存, 减少内存碎片
2. 性能: 当频繁地分配和释放小对象时，分配器可以减少系统调用[^1]的开销并提高性能。
3. 内存池: 分配器可用于实现内存池，其中预分配固定大小的内存池，并从该池中分配对象。这可以通过减少动态内存分配和释放所花费的时间来提高性能。
4. 对齐和自定义: 分配器允许对内存对齐和自定义进行细粒度控制。这在需要特定对齐要求或专用内存管理策略的场景中非常有用。
5. 与容器集成: 分配器被设计成与容器(如向量、列表和映射)无缝地工作。通过使用自定义分配器，您可以控制这些容器如何分配和释放内存，从而实现针对您的应用程序的优化。

## 作用

[^1]: 频繁的申请与与释放内存

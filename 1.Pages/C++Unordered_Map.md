---
Type: 
aliases:
  - std::unordered_map
tags: 
modifiedDate: 2025/06/16, 14:48:27
---

# C++Unordered_Map

## 定义

## 实现

- 底层使用[[哈希表]]实现
- 对于特殊类型，需要指定哈希函数

具体的:
- 使用哈希函数来将key映射到哈希表中相应的桶。
- 使用链表数组来处理冲突，会将多个冲突的key映射到同一个桶。每个桶包含一个具有相同哈希值的元素链表。
1. 哈希函数：unordered_map 容器使用哈希函数将key转换为哈希值。该哈希值用于确定存储键值对的桶。
2. 桶：unordered_map容器内部维护一个桶数组。每个桶都是一个链表 [[C++List|std::list]]，存储具有相同哈希值的键值对。
3. 冲突解决：当两个或者多个key具有相同的哈希值并映射到相同的桶时，就会发生冲突。为了处理冲突，unordered_map容器使用单独的链表。它在每个桶中维护元素的链表，并且具有相同哈希值的新元素被附加到链表的末尾。
4. **负载因子 (Load Factor)**：unordered_map容器中还维护一个**负载因子**[^1]，它是元素数量与桶数量的比率。
5. **重哈希 (Rehashing)**：为了防止性能下降，当 `unordered_map` 的负载因子超过一个阈值（默认为1.0）时，它会自动进行**重哈希**。
    - 创建一个**更大**的桶数组（通常是原大小的两倍以上）。
    - 遍历旧表中的**每一个元素**。
    - 根据新的桶数量，**重新计算**每个元素的哈希索引，并将其放入新表中。
    - 释放旧表的内存。

## 性能

- 插入、访问、删除操作都是O(1)，最坏情况下为O(n)（多个键值对存储在同一个桶里）

[^1]: 这个值等于 `容器中的元素数量 / 桶的数量`。它衡量了哈希表的“拥挤”程度。负载因子越高，哈希冲突的概率越大，链表就越长，查询效率就越低。

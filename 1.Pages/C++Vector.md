---
Type: 
aliases:
  - std::vector
tags: 
modifiedDate: 2025/06/16, 16:05:10
---

# C++Vector

## 定义

## 实现

1. 使用顺序数组实现，一段连续的线性空间。
2. 内部维护三个指针（头、尾、空间尾）
3. 当插入新元素时, 如果容量够则直接插入,否则需要扩容. 扩容扩为**两倍**
4. ==在扩容过程中，需要重新分配空间、移动数据、释放原空间==
    1. 扩充过程并不是直接在原有空间后⾯追加容量，⽽是**新申请⼀块连续的内存空间**，将**原有的数据拷贝到新空间**中，然后**再释放原有空间**。需要注意的是，由于每次扩充都会开辟新的内存空间，因此**在扩充之后，原有的迭代器和指针将会失效**。

## 常用操作

1. push_back：先外部构造，再移动到尾部[^1]
2. emplace_back：通过转发参数，进行原地构造[^2]
3. erase：删除当前迭代器指向的对象，返回下一个合法的迭代器
4. insert
5. size: 尾指针-头指针
6. clear: `尾指针=头指针`, ==并不改变实际存储数据,原有数据仍然能访问==
7. shrink_to_fit, 要求容器退回不需要的内存空间。
8. pop_back 尾指针-1,并不改变实际存储数据,原有数据仍然能访问

### 时间复杂度

1. 中间插入O(n)，尾插O(1)
2. 中间删除O(n)，尾删O(1)
3. 随机访问：O(1)

[^1]: 如果 移动构造可用,否则为拷贝构造
[^2]: 在已经得到的内存上

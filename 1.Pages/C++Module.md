---
Type: 
aliases:
  - 模块
  - Module
tags: 
modifiedDate: 2025/06/12, 19:57:46
---

# C++Module

## 定义

[[C++20新特性]]

## 原因

在 20 之前 `#include` 将文件内容复制到当前文件中
- 极慢的编译速度
    - 每个源文件包含了头文件的源文件都要重复解析头文件
    - 传递性包含
    - 头文件修改, 所有包含了头文件的源文件都要重新编译
- 封装性差
    - 宏污染 (宏是全局性的, 对整个程序都有效)
    - 私有实现暴露, 通常通过 [[PIMPL]] 解决
- 顺序依赖
    - `#inlcude` 顺序影响编译结果
- 循环依赖
    - `#pragma once`
    - `#ifndef...#define...#endif`

## 细节

- 虽然模块 ixx 文件可以有声明和实现, 但通常分开为 ixx 文件和 cpp 文件
- 每个文件可以有一个**全局模块片段**, 用于兼容不支持模块的传统头文件
- `import std` 在 [[C++23新特性]] 可用, 需要编译器支持, 目前基本都是支持的

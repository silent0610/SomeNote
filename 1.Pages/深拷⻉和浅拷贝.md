---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/13, 19:57:26
---

# 深拷⻉和浅拷贝

- 编译器合成的默认的拷贝操作是浅拷贝,即对成员进行逐个赋值，当数据成员中没有指针类型的时候，浅拷贝可以按照预期完成任务。
- 但是当数据成员中包含指针类型的时候,容易出现**野指针**[^1]和**悬空指针**[^2]问题
- 当数据成员包含指针类型的时候，需要进行**深拷贝**，即在堆内存中申请新的内存空间，并让成员指针指向这块独立的内存空间，这样可以避免两个对象的两个指针指向同一片区域，也可以避免在析构的时候出现悬空指针。

## 浅拷贝

复制指针地址 → 两个对象共用同一份资源

容易导致
- 悬挂指针
- **重复释放**

但是速度较快

## 深拷贝

复制对象内指针指向的数据 → 两个对象各自拥有独立资源

[^1]: 通常指未初始化或指向不合法内存的指针
[^2]: 指向的内存空间已被释放或不再有效

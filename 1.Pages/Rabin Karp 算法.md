---
Type: 
aliases:
  - RK
tags: 
modifiedDate: 星期三, 六月 4日 2025, 9:59:38 上午
---
对于给定文本串 T与模式串 p，通过滚动哈希算快速筛选出与模式串 p 不匹配的文本位置，然后在其余位置继续检查匹配项。
[02. Rabin Karp 算法 | 算法通关手册（LeetCode）](https://algo.itcharge.cn/06.String/02.String-Single-Pattern-Matching/02.String-Rabin-Karp/)

## 整体步骤

[滚动哈希算法](滚动哈希算法.md)
1. 对于给定的文本串 $T$ 与模式串 $p$ ，求出文本串 $T$ 的长度为 $n$ ，模式串 $p$ 的长度为 $m$ 。
2. 通过滚动哈希算法求出模式串 $p$ 的哈希值 $hash\underline{\hspace{0.5em}}p$ 。[^1]
3. 再通过滚动哈希算法对文本串 $T$ 中 $n - m + 1$ 个子串分别求哈希值 $hash\underline{\hspace{0.5em}}t$ 。[^2]
4. 然后逐个与模式串的哈希值比较大小。
	1. 如果当前子串的哈希值 $hash\underline{\hspace{0.5em}}t$ 与模式串的哈希值 $hash\underline{\hspace{0.5em}}p$ 不同，则说明两者不匹配，则继续向后匹配。
	2. 如果当前子串的哈希值 $hash\underline{\hspace{0.5em}}t$ 与模式串的哈希值 $hash\underline{\hspace{0.5em}}p$ 相等，则验证当前子串和模式串的每个字符是否真的相等（避免哈希冲突）。
		1. 如果当前子串和模式串的每个字符相等，则说明当前子串和模式串匹配。
		2. 如果当前子串和模式串的每个字符不相等，则说明两者不匹配，继续向后匹配。
5. 比较到末尾，如果仍未成功匹配，则说明文本串 $T$ 中不包含模式串 $p$ ，方法返回 $-1$ 。

[^1]: 因为哈希值过大会造成溢出，所以我们在计算过程中还要对结果取模。取模的值应该尽可能大，并且应该是质数，这样才能减少哈希碰撞的概率。
[^2]: O(n)

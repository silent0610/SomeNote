---
Type: 
aliases:
  - Lambda 函数
tags: 
modifiedDate: 2025/06/12, 19:35:39
---

# Lambda 表达式

## 定义

是一个匿名函数对象，能够在作用域内捕获变量
==本质是一个匿名类型对象, 对lambda 对象进行() 调用本质上是调用了类的 () 运算符==
它包含：一个 _捕获列表_；一组可选的参数[^1]（带可选尾置返回类型）；以及一个**函数体**[^2]。捕获列表的示例：

### 捕获列表

- `[]` - 不捕获任何内容。
- `[=]` - 按值捕获作用域内的局部对象（局部变量、参数）。C++20之前[=]会隐式捕获this，而C++20需要显式捕获，这样 `[=, this]`
- `[&]` - 按引用捕获作用域内的局部对象（局部变量、参数）。
- `[=, &a]` 值捕获外部作用域所有变量，按引用捕获a变量
- `[a]` 只值捕获a变量，不捕获其它变量
- `[this]` - 捕获当前类中的this指针 `this`。
- `[*this]` 持有对象的拷贝 [[C++17新特性]]
- `[a, &b]` - 按值捕获对象 `a`，按引用捕获对象 `b`。

默认情况下，**值捕获**在 lambda 中**不能被修改**，因为编译器生成的方法被标记为 `const`。`mutable` 关键字允许修改捕获的变量。该关键字放在参数列表之后（即使参数列表为空也必须存在）。

```cpp
int x = 1;

auto f1 = [&x] { x = 2; }; // OK：`x` 是引用，修改原始变量

auto f2 = [x] { x = 2; }; // 错误：lambda 只能在捕获的值上执行 const 操作
// 与以下代码相比：
auto f3 = [x]() mutable { x = 2; }; // OK：lambda 可以对捕获的值执行任何操作
```

[^1]: 可以为空, 但是有 `mutable` 关键字时不能缺
[^2]: 函数体本质上是重载了类的() 运算符, 函数体的内容在 () 函数内部

---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/13, 15:13:52
---

# C++虚函数

## 定义

派生类可以对虚函数进行重写，允许通过基类指针调用派生类的虚函数。虚函数通过在函数声明前加上 virtual 进行标识。

## 实现

c++中的虚函数（virtual function）是通过 [[C++虚表]]（vtable）来实现。

当⼀个类中包含虚函数的时候，编译器会为该类的对象生成⼀个虚函数表指针 （vtable pointer），这个指针指向一个虚函数表，这个虚函数表中存储了各个虚函数的地址。

当通过基类指针或者基类引用调用虚函数时，会使用这个虚函数表指针来查找正确的虚函数表，并调用相应的虚函数。

需要注意的是：理论上只要函数被virtual修饰，都会使用虚函数表指针来查找虚函数表，再找到对应的虚函数地址。但是很多函数调用在编译期就可以确定下来，编译器会自动进行优化。

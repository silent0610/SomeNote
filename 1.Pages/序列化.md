---
Type:
  - Page
aliases: 
tags: 
Status: 
modifiedDate: 星期五, 五月 30日 2025, 11:38:23 中午
---
**资产（Asset）**是引擎中的资源对象，如：
- 材质（Material）
- 网格（Mesh）
- 动画（Animation）
- 场景（Scene）
- 配置（ScriptableObject / JSON / YAML / Binary 等）

**序列化（Serialization）**就是将它们转为**可保存的格式（文本或二进制）**，再在运行或编辑器中**还原为内存对象（反序列化）**。

基本就是 Json 或者二进制

## 流程

1. 注册字段
2. 序列化 (写json)
3. 反序列化 (读 json)

## 实现

使用[反射](反射.md)实现

- **遍历对象成员：** 利用反射系统获取一个对象的类型信息，然后遍历该类型 (该对象)的所有可序列化成员变量（属性）。
- **获取/设置值：** 通过反射获取每个成员变量的值，并将其写入到序列化目标（例如 Json）；反序列化时，从目标中读取值并设置给对应的成员变量。
- **递归处理：** 如果成员变量本身是另一个复杂对象（非基本类型），则递归地对该子对象进行序列化/反序列化。

## 一些细节

- 给资产新增一个属性怎么办？
	- 使用版本号
		- 在序列化的资产数据中包含一个明确的**版本号**。
		- 在资产文件的头部或某个固定位置，存储一个整数形式的版本号。
		- 加载时，读取这个版本号。
		- 根据版本号，在反序列化过程中执行不同的逻辑（称为**数据迁移**或**升级路径**）。
		- 如果旧版本没有新属性，可以给它赋予一个默认值。

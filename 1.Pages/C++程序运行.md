---
Type:
aliases: 
tags: 
modifiedDate: 2025/06/17, 19:18:48
---

# C++程序运行

系统加载 → 运行时初始化 → 全局/静态对象构造 → main() 函数->

## Main 函数之前

1. **操作系统加载程序**
    1. 操作系统将 exe 加载到内存中
    2. 初始化堆栈, 加载动态链接库
    3. 找到程序入口点（如 `_start`）开始执行。
2. 调用 `_start` 函数（程序真实入口）
    1. 由**编译器和链接器自动生成的启动代码**
    - 设置 C/C++ 运行环境；
    - 获取 `argc`/`argv`；
    - 初始化栈指针；
3. **C/C++ 运行时初始化（runtime setup）**
    - 初始化静态/全局对象
    - 顺序受限于翻译单元加载顺序（这也是为什么静态初始化顺序可能成为 bug）。
    - 注册 atexit 析构函数
        - 所有对象的析构函数会注册在 `atexit` 链表中；
        - 等 `main()` 结束后会自动调用它们析构。
4. 将main函数的参数argc，argv等传递给main函数，然后才真正运行main函数

## Main 函数之后

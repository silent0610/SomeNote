---
Type:
  - Page
aliases: 
tags: 
modifiedDate: 星期二, 六月 3日 2025, 10:25:41 晚上
---
[[C++构造函数]]

C++ 中的虚函数是通过虚函数表（vtable）实现的。而虚函数表是在构造函数**执行完毕后**才建立或初始化的。因此：
- 当构造函数正在执行时，对象的虚函数表还没有完全建立；
- 此时如果你试图通过虚函数机制调用构造函数，会造成未定义行为或逻辑错误；
- 因此，构造函数不能是虚函数，编译器也会报错。
- 虚函数的使用依赖于虚表和虚表指针, 而虚表指针在构造函数期间才被设置
    - 即虚构造函数的调用要求虚表指针已赋值, 而虚表指针已赋值代表构造函数已完成
        - 即需构造函数要求构造函数已完成, 这是矛盾的

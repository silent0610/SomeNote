---
Type: 
aliases: 
tags: 
modifiedDate: 2025/06/12, 18:29:40
---

# C++14新特性

## 个人认为重要

- [[C++ Lambda 捕获初始化器]]
- 使用 [[C++ auto和decltype|auto]] 推导函数返回值类型
- decltype(auto)
    - `decltype(auto)` 类型说明符也像 `auto` 一样推导类型。然而，它在推导返回类型时会保留引用和 cv[^1] 限定符，而 `auto` 则不会。
- 放宽了 [[C++ constexpr]] 限制 
- `std::make_unique`
    - 避免使用 `new` 操作符。
    - 避免在指定指针所持有的底层类型时重复代码。
    - 提供了异常安全性。
        - 将对象的创建和智能指针的构造“捆绑”在了一个函数调用中, 中间不会有异常, 防止内存泄露

## 重要性

### 一线核心特性（频繁使用，对代码清晰性和可维护性提升显著）

| 特性                                           | 说明                       | 示例                                    | 使用场景       |
| -------------------------------------------- | ------------------------ | ------------------------------------- | ---------- |
| **通用 lambda 捕获 (`[=, x = std::move(obj)]`)** | Lambda 中支持变量初始化和 move 捕获 | `[x = std::move(obj)](){ use(x); }`   | 资源传递、异步回调  |
| **返回类型推导（`auto` return）**                    | 普通函数支持使用 `auto` 推导返回类型   | `auto func() { return 123; }`         | 简洁代码、泛型开发  |
| **`decltype(auto)`**                         | 推导出完整类型（包括引用）            | `decltype(auto) f() { return x; }`    | 转发函数、模板元编程 |
| **泛型 Lambda（Lambda 参数可为模板）**                 | Lambda 可接收任意类型参数         | `[](auto x, auto y){ return x + y; }` | 容器遍历、算法、回调 |

### 二线重要特性（中等频率使用，提升表达能力或避免坑）

| 特性                           | 说明                                 | 示例                                                 | 使用场景       |
| ---------------------------- | ---------------------------------- | -------------------------------------------------- | ---------- |
| **变量模板（Variable Templates）** | 可为常量定义模板形式                         | `template<typename T> constexpr T pi = T(3.1415);` | 常量表达式泛型    |
| **函数模板参数推导增强**               | 如 `std::make_unique<T[]>` 不再需要指定大小 | `make_unique<int[]>(10);`                          | 安全智能指针构造   |
| **std::make_unique**         | `std::unique_ptr` 构造函数             | `auto ptr = std::make_unique<MyType>();`           | 推荐替代 `new` |
| **二进制字面量与单引号分隔**             | 可用 `0b0101'1010` 格式写数字             | `0b1010'0101`                                      | 更直观的位运算表达  |
| 别名模板                         |                                    | `template<typename T>using B = A<T, int>;<br>`     |            |

---

### 三线次要特性（语法小增强，了解即可）

| 特性                          | 说明                                | 示例                                          | 使用场景              |
| --------------------------- | --------------------------------- | ------------------------------------------- | ----------------- |
| **整型字面值后缀增强**               | 如 `123s` 为 `std::chrono::seconds` | `using namespace std::chrono_literals; 10s` | 时间表达更优雅           |
| **std::exchange**           | 赋新值并返回旧值                          | `auto old = std::exchange(x, y);`           |                   |
| **返回值类型推导支持成员函数**           | 成员函数也可 `auto` return              | `auto f() const { return val; }`            | 类模板泛型设计           |
| **aggregate 初始化支持基类**       | 聚合初始化支持继承类成员                      | `Derived d{{1, 2}, 3};`                     | C风格 struct 初始化继承类 |
| **[[C++ constexpr]]  限制放宽** | 可用更多语法：分支、循环等                     | `constexpr int f() { int x=0; for(...) }`   | 编译期计算增强           |

---

### 总结：对游戏/引擎开发者特别重要的 C++14 特性

| 排名  | 特性                                     | 用处         |
| --- | -------------------------------------- | ---------- |
| 🥇  | **通用 Lambda 捕获 (`[x = std::move()]`)** | 异步、回调、资源安全 |
| 🥇  | **泛型 Lambda**                          | 算法、遍历、模板替代 |
| 🥇  | **返回类型自动推导 (`auto`/`decltype(auto`)**  | 简洁且适配模板函数  |
| 🥈  | **std::make_unique**                   | 智能指针安全分配   |
| 🥈  | **变量模板**                               | 高级模板与配置    |
| 🥉  | **std::chrono 字面量**、**exchange**       | 可读性增强      |

[^1]: v 指 `volatile`

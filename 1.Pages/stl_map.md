---
Type:
  - Page
aliases: 
tags: 
modifiedDate: 星期六, 五月 31日 2025, 1:26:35 下午
---

## 描述

C++ 标准并没有严格规定 `std::map` 必须使用哪一种特定的数据结构来实现，但它对性能提出了一些要求，例如：

- **性能**: 插入 (Insertion)、删除 (Deletion) 和查找 (Lookup) 操作的**平均和最坏时间复杂度**都应该是**对数时间**，即 O(logN)，其中 N 是 map 中元素的数量。
- **有序性**: 元素必须按照键 (key) 的顺序存储，并支持双向迭代器进行有序遍历。

## 实现

通常通过[红黑树](红黑树.md)实现, 一种[AVL](AVL.md)

### 为什么使用红黑树

- 满足键的有序性
    - 通过中序遍历即可有序遍历
- 保证操作时间复杂度O(logN)
    - 相较于其他一些自平衡二叉搜索树（如 AVL 树），红黑树在平衡性上可能没有那么“严格”。AVL 树要求左右子树的高度差最多为 1，而红黑树的约束相对宽松一些（最长路径不超过最短路径的两倍）。
    - 这种相对宽松的平衡性意味着红黑树在进行插入和删除操作时，需要进行的**旋转 (rotations)** 和**颜色调整 (color flips)** 操作通常比 AVL 树要少，或者说调整的代价相对较低。这使得红黑树在写操作（插入、删除）频繁的场景下，其平均性能表现通常更好。
    - 虽然查找操作在最坏情况下可能比 AVL 树略慢（因为树可能稍微不那么平衡），但这种差异通常不大，并且其对数复杂度仍然得到保证。
- 空间开销相对较小: 红黑树的每个节点只需要额外存储一位颜色信息（红或黑），空间开销不大。
- 

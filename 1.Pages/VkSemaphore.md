---
Type:
  - Page
aliases:
  - Semaphore
  - 信号量
Status:
tags: 
modifiedDate: 星期一, 五月 26日 2025, 8:58:05 晚上
---
[Vulkan的同步机制](Vulkan的同步机制.md)

## 定义

`VkSemaphore` 是 Vulkan 中用于 ***GPU 内部或命令队列之间*** 任务同步的轻量级原语。它不与 CPU 直接交互，而是通过 GPU 操作的“信号”和“等待”机制来协调不同命令的执行顺序。

## 作用

- **发出信号 (Signal)**：当一个 GPU 任务完成时，它可以发出一个 `Semaphore` 信号。
- **等待 (Wait)**：另一个 GPU 任务在执行前，可以等待某个 `Semaphore` 信号。

## 应用例子

- 交换链图像获取与渲染同步
	- 最常见的用途。在渲染一帧时，我们需要等待交换链提供一个可用的图像才能开始渲染。`Semaphore` 用于在图像可用时发出信号，然后我们的渲染命令缓冲区会等待这个信号才开始执行。
- 渲染完成与呈现同步
	- 渲染到交换链图像完成后，我们需要确保渲染操作全部完成才能将图像提交给呈现引擎。此时，渲染完成的命令会发出一个 `Semaphore` 信号，而呈现操作会等待这个信号。
- 不同缓冲区的依赖
	- 如果一个 commandBuffer A 中的某个 Pass 用到了之前的 CommandBuffer B 的 pass 的输出, 可以用 `Semaphore` 确保 B 在 A 完成后才执行。
- 跨命令队列同步
	- 一个计算队列的任务完成后，其结果需要被图形队列使用。`Semaphore` 可以作为跨队列的同步点。
